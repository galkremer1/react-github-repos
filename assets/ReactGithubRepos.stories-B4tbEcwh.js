import{r as p,R as e}from"./index-D4lIrffr.js";import{a as D,L as se,E as R}from"./ErrorMessage--3a89Vxk.js";import{R as ne}from"./RepoCard-YD4OVroH.js";/* empty css               */const oe=({user:o,repos:i,excludedRepos:u,sortBy:f="stars",sortDirection:g="desc"})=>{const[h,d]=p.useState([]),[m,t]=p.useState(!0),[y,v]=p.useState(null),[l,w]=p.useState(null);return p.useEffect(()=>{(async()=>{try{if(t(!0),v(null),i&&i.length>0){const a=i.map(n=>D.get(`https://api.github.com/repos/${o}/${n}`)),s=await Promise.all(a),c=s.map(n=>n.data);if(s.length>0){const n=s[s.length-1];w({limit:parseInt(n.headers["x-ratelimit-limit"]||"0"),remaining:parseInt(n.headers["x-ratelimit-remaining"]||"0"),reset:parseInt(n.headers["x-ratelimit-reset"]||"0")})}d(c)}else{const a=await D.get(`https://api.github.com/users/${o}/repos?per_page=100`);w({limit:parseInt(a.headers["x-ratelimit-limit"]||"0"),remaining:parseInt(a.headers["x-ratelimit-remaining"]||"0"),reset:parseInt(a.headers["x-ratelimit-reset"]||"0")});let s=a.data;u&&u.length>0&&(s=s.filter(c=>!u.includes(c.name))),d(s)}}catch(a){v(a instanceof Error?a:new Error("An unknown error occurred"))}finally{t(!1)}})()},[o,i?i.join(","):"",u?u.join(","):""]),p.useEffect(()=>{if(h.length>0){const N=[...h].sort((a,s)=>{let c,n;switch(f){case"stars":c=a.stargazers_count,n=s.stargazers_count;break;case"forks":c=a.forks_count,n=s.forks_count;break;case"updated":c=new Date(a.updated_at).getTime(),n=new Date(s.updated_at).getTime();break;default:c=a.stargazers_count,n=s.stargazers_count}return g==="asc"?c>n?1:-1:c<n?1:-1});d(N)}},[f,g,h.length]),{repositories:h,loading:m,error:y,rateLimit:l}},W=({currentPage:o,totalPages:i,onPageChange:u})=>{if(i<=1)return null;const f=()=>{const g=[];let d=Math.max(1,o-Math.floor(2.5)),m=d+5-1;m>i&&(m=i,d=Math.max(1,m-5+1));for(let t=d;t<=m;t++)g.push(e.createElement("button",{key:t,onClick:()=>u(t),className:`pagination__button ${o===t?"pagination__button--current":""}`,"aria-current":o===t?"page":void 0},t));return g};return e.createElement("div",{className:"pagination"},e.createElement("button",{onClick:()=>u(o-1),disabled:o===1,className:"pagination__button","aria-label":"Previous page"},"« Prev"),f(),e.createElement("button",{onClick:()=>u(o+1),disabled:o===i,className:"pagination__button","aria-label":"Next page"},"Next »"))};W.__docgenInfo={description:"",methods:[],displayName:"Pagination",props:{currentPage:{required:!0,tsType:{name:"number"},description:""},totalPages:{required:!0,tsType:{name:"number"},description:""},onPageChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(page: number) => void",signature:{arguments:[{type:{name:"number"},name:"page"}],return:{name:"void"}}},description:""}}};const H=({onSortChange:o,onDirectionChange:i,onFilterChange:u,sortBy:f,sortDirection:g,filter:h,enableSorting:d=!0,enableFiltering:m=!0})=>e.createElement("div",{className:"repo-filter-sort"},m&&e.createElement("div",{className:"repo-filter"},e.createElement("input",{type:"text",value:h,onChange:t=>u(t.target.value),placeholder:"Filter repositories...",className:"repo-filter__input","aria-label":"Filter repositories"})),d&&e.createElement("div",{className:"repo-sort"},e.createElement("select",{value:f,onChange:t=>o(t.target.value),className:"repo-sort__select","aria-label":"Sort by"},e.createElement("option",{value:"stars"},"Stars"),e.createElement("option",{value:"forks"},"Forks"),e.createElement("option",{value:"updated"},"Updated")),e.createElement("select",{value:g,onChange:t=>i(t.target.value),className:"repo-sort__select","aria-label":"Sort direction"},e.createElement("option",{value:"desc"},"Descending"),e.createElement("option",{value:"asc"},"Ascending"))));H.__docgenInfo={description:"",methods:[],displayName:"FilterSort",props:{onSortChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(option: SortOption) => void",signature:{arguments:[{type:{name:"union",raw:"'stars' | 'forks' | 'updated'",elements:[{name:"literal",value:"'stars'"},{name:"literal",value:"'forks'"},{name:"literal",value:"'updated'"}]},name:"option"}],return:{name:"void"}}},description:""},onDirectionChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(direction: SortDirection) => void",signature:{arguments:[{type:{name:"union",raw:"'asc' | 'desc'",elements:[{name:"literal",value:"'asc'"},{name:"literal",value:"'desc'"}]},name:"direction"}],return:{name:"void"}}},description:""},onFilterChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(filter: string) => void",signature:{arguments:[{type:{name:"string"},name:"filter"}],return:{name:"void"}}},description:""},sortBy:{required:!0,tsType:{name:"union",raw:"'stars' | 'forks' | 'updated'",elements:[{name:"literal",value:"'stars'"},{name:"literal",value:"'forks'"},{name:"literal",value:"'updated'"}]},description:""},sortDirection:{required:!0,tsType:{name:"union",raw:"'asc' | 'desc'",elements:[{name:"literal",value:"'asc'"},{name:"literal",value:"'desc'"}]},description:""},filter:{required:!0,tsType:{name:"string"},description:""},enableSorting:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},enableFiltering:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};const O=({user:o,repos:i,excludedRepos:u,usePreFetchedData:f=!1,preFetchedData:g,sortBy:h="stars",sortDirection:d="desc",enableSorting:m=!0,enableFiltering:t=!0,itemsPerPage:y=6,onError:v,...l})=>{const[w,N]=p.useState(""),[a,s]=p.useState(1),[c,n]=p.useState(h),[L,J]=p.useState(d),{repositories:S,loading:K,error:k}=f&&g?{repositories:g,loading:!1,error:null}:oe({user:o,repos:i,excludedRepos:u,sortBy:c,sortDirection:L});e.useEffect(()=>{k&&v&&v(k)},[k,v]);const C=p.useMemo(()=>{if(!S)return[];if(!w)return S;const r=w.toLowerCase();return S.filter(b=>{const te=b.name.toLowerCase().includes(r),ae=b.description?b.description.toLowerCase().includes(r):!1,re=b.language?b.language.toLowerCase().includes(r):!1;return te||ae||re})},[S,w]),_=Math.max(1,Math.ceil(C.length/y));e.useEffect(()=>{s(1)},[w]);const Q=p.useMemo(()=>{const r=(a-1)*y,b=r+y;return C.slice(r,b)},[C,a,y]),X=r=>{s(r),window.scrollTo({top:0,behavior:"smooth"})},Y=r=>{n(r)},Z=r=>{J(r)},ee=r=>{N(r)};return K?e.createElement(se,null):k?e.createElement(R,{message:`Failed to load repositories: ${k.message}`}):!S||S.length===0?e.createElement(R,{message:"No repositories found"}):e.createElement("div",{className:`react-github-repos ${l.className||""}`},(t||m)&&e.createElement(H,{onSortChange:Y,onDirectionChange:Z,onFilterChange:ee,sortBy:c,sortDirection:L,filter:w,enableSorting:m,enableFiltering:t}),e.createElement("div",{className:"repo-grid"},Q.map(r=>e.createElement(ne,{key:r.id,repository:r,showAvatar:l.showAvatar,avatarUrl:l.avatarUrl,showName:l.showName,showDescription:l.showDescription,showStars:l.showStars,showForks:l.showForks,showLanguage:l.showLanguage,showLastUpdated:l.showLastUpdated,className:l.className,cardClassName:l.cardClassName,onRepoClick:l.onRepoClick}))),_>1&&e.createElement(W,{currentPage:a,totalPages:_,onPageChange:X}))};O.__docgenInfo={description:"",methods:[],displayName:"ReactGithubRepos",props:{showName:{required:!1,tsType:{name:"boolean"},description:""},showDescription:{required:!1,tsType:{name:"boolean"},description:""},showStars:{required:!1,tsType:{name:"boolean"},description:""},showForks:{required:!1,tsType:{name:"boolean"},description:""},showLanguage:{required:!1,tsType:{name:"boolean"},description:""},showLastUpdated:{required:!1,tsType:{name:"boolean"},description:""},showAvatar:{required:!1,tsType:{name:"boolean"},description:""},avatarUrl:{required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},cardClassName:{required:!1,tsType:{name:"string"},description:""},onRepoClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(repo: Repository) => void",signature:{arguments:[{type:{name:"Repository"},name:"repo"}],return:{name:"void"}}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(error: Error) => void",signature:{arguments:[{type:{name:"Error"},name:"error"}],return:{name:"void"}}},description:""},user:{required:!0,tsType:{name:"string"},description:""},repos:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},excludedRepos:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},enableSorting:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},enableFiltering:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},sortBy:{required:!1,tsType:{name:"union",raw:"'stars' | 'forks' | 'updated'",elements:[{name:"literal",value:"'stars'"},{name:"literal",value:"'forks'"},{name:"literal",value:"'updated'"}]},description:"",defaultValue:{value:"'stars'",computed:!1}},sortDirection:{required:!1,tsType:{name:"union",raw:"'asc' | 'desc'",elements:[{name:"literal",value:"'asc'"},{name:"literal",value:"'desc'"}]},description:"",defaultValue:{value:"'desc'",computed:!1}},itemsPerPage:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"6",computed:!1}},usePreFetchedData:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},preFetchedData:{required:!1,tsType:{name:"Array",elements:[{name:"Repository"}],raw:"Repository[]"},description:""}}};const pe={title:"GitHub/ReactGithubRepos",component:O,parameters:{layout:"fullscreen",docs:{description:{component:"Component that displays a grid of GitHub repositories. Clicking on a repository card will open the repository in a new window."}}},tags:["autodocs"],argTypes:{showName:{control:"boolean"},showDescription:{control:"boolean"},showStars:{control:"boolean"},showForks:{control:"boolean"},showLanguage:{control:"boolean"},showLastUpdated:{control:"boolean"},showAvatar:{control:"boolean"},enableSorting:{control:"boolean"},enableFiltering:{control:"boolean"},itemsPerPage:{control:{type:"range",min:3,max:12,step:3}},sortBy:{control:{type:"select"},options:["stars","forks","updated"]},sortDirection:{control:{type:"select"},options:["asc","desc"]}}},F={args:{user:"facebook",showName:!0,showDescription:!0,showStars:!0,showForks:!0,showLanguage:!0,showLastUpdated:!0,enableSorting:!0,enableFiltering:!0,itemsPerPage:6,sortBy:"stars",sortDirection:"desc"}},T={args:{user:"facebook",repos:["react","react-native","jest","flux","create-react-app","relay"],showName:!0,showDescription:!0,showStars:!0,showForks:!0,showLanguage:!0,showLastUpdated:!0,enableSorting:!0,enableFiltering:!0,itemsPerPage:6}},E={args:{user:"facebook",showName:!0,showDescription:!1,showStars:!0,showForks:!1,showLanguage:!0,showLastUpdated:!1,enableSorting:!1,enableFiltering:!1,itemsPerPage:3}},q={args:{user:"facebook",repos:["react","react-native","jest","flux","create-react-app","relay"],showName:!0,showDescription:!0,showStars:!0,showForks:!0,showLanguage:!0,showLastUpdated:!0,showAvatar:!0,avatarUrl:"https://avatars.githubusercontent.com/u/69631?v=4",enableSorting:!0,enableFiltering:!0,itemsPerPage:6}};var x,U,A;F.parameters={...F.parameters,docs:{...(x=F.parameters)==null?void 0:x.docs,source:{originalSource:`{
  args: {
    user: 'facebook',
    showName: true,
    showDescription: true,
    showStars: true,
    showForks: true,
    showLanguage: true,
    showLastUpdated: true,
    enableSorting: true,
    enableFiltering: true,
    itemsPerPage: 6,
    sortBy: 'stars',
    sortDirection: 'desc'
  }
}`,...(A=(U=F.parameters)==null?void 0:U.docs)==null?void 0:A.source}}};var I,P,B;T.parameters={...T.parameters,docs:{...(I=T.parameters)==null?void 0:I.docs,source:{originalSource:`{
  args: {
    user: 'facebook',
    repos: ['react', 'react-native', 'jest', 'flux', 'create-react-app', 'relay'],
    showName: true,
    showDescription: true,
    showStars: true,
    showForks: true,
    showLanguage: true,
    showLastUpdated: true,
    enableSorting: true,
    enableFiltering: true,
    itemsPerPage: 6
  }
}`,...(B=(P=T.parameters)==null?void 0:P.docs)==null?void 0:B.source}}};var M,V,G;E.parameters={...E.parameters,docs:{...(M=E.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    user: 'facebook',
    showName: true,
    showDescription: false,
    showStars: true,
    showForks: false,
    showLanguage: true,
    showLastUpdated: false,
    enableSorting: false,
    enableFiltering: false,
    itemsPerPage: 3
  }
}`,...(G=(V=E.parameters)==null?void 0:V.docs)==null?void 0:G.source}}};var j,$,z;q.parameters={...q.parameters,docs:{...(j=q.parameters)==null?void 0:j.docs,source:{originalSource:`{
  args: {
    user: 'facebook',
    repos: ['react', 'react-native', 'jest', 'flux', 'create-react-app', 'relay'],
    showName: true,
    showDescription: true,
    showStars: true,
    showForks: true,
    showLanguage: true,
    showLastUpdated: true,
    showAvatar: true,
    avatarUrl: 'https://avatars.githubusercontent.com/u/69631?v=4',
    // Facebook's GitHub avatar
    enableSorting: true,
    enableFiltering: true,
    itemsPerPage: 6
  }
}`,...(z=($=q.parameters)==null?void 0:$.docs)==null?void 0:z.source}}};const de=["Default","SpecificRepos","MinimalWithFewerItems","WithAvatars"];export{F as Default,E as MinimalWithFewerItems,T as SpecificRepos,q as WithAvatars,de as __namedExportsOrder,pe as default};
